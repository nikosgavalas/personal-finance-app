{% extends "./base.html" %}

{% block content %}

<p>Welcome {{ username }}!</p>

{% if accounts %}
<div class="row">
  <div class="col-md-4">
    <table class="table table-striped table-bordered table-hover">
      <caption>Your accounts</caption>
      <thead>
      <tr>
        <th>Account</th>
        <th>Balance</th>
        <th>Actions</th>
      </tr>
      <thead>
      <tbody>
      {% for account, balance in accounts %}
      <tr>
        <td>{{ account }}</td>
        <td>{{ balance  }}</td>
        <td><a href="{% url 'app:edit_account' account.id %}">edit</a> <a href="{% url 'app:delete_account' account.id %}">delete</a></td>
      </tr>
      {% endfor %}
      <tr>
        <td><b>Total</b></td>
        <td>{{ total_balance }}</td>
      </tr>
      </tbody>
    </table>
  </div>
  <div class="col-md-8">
	  <canvas id="lineChart"></canvas>
  </div>
</div>
{% else %}
<p>You have no accounts in your profile. <a href="{% url 'app:add_account' %}">Create one to get started.</a></p>
{% endif %}

<br>

<!-- Chart JS -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
<script>
	var config = {
		type: 'line',
		data: {
			labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
			datasets: [{
				label: 'My First dataset',
				backgroundColor: 'red',
				borderColor: 'red',
				data: [1, 2, 3, 2.2, 12, 6.3, 7],
				fill: false,
			}, {
				label: 'My Second dataset',
				fill: false,
				backgroundColor: 'blue',
				borderColor: 'blue',
				data: [1.7, 1.2, 3, -2, 5, 6.5, 7],
			}]
		},
		options: {
			responsive: true,
			title: {
				display: true,
				text: 'Chart.js Line Chart'
			},
			tooltips: {
				mode: 'index',
				intersect: false,
			},
			hover: {
				mode: 'nearest',
				intersect: true
			},
			scales: {
				xAxes: [{
					display: true,
					scaleLabel: {
						display: true,
						labelString: 'Month'
					}
				}],
				yAxes: [{
					display: true,
					scaleLabel: {
						display: true,
						labelString: 'Value'
					}
				}]
			}
		}
	};
	var ctx = document.getElementById('lineChart').getContext('2d');
	var chart = new Chart(ctx, config);
</script>

{% endblock %}
